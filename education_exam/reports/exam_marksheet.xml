<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="external_layout_mark_sheet">
                    <style>
                        .right_top{
                            float:right;
                            padding-top:65px;
                            padding-right:10px;
                            }
                            .left_top{
                            float:left;
                            padding-top:165px;
                            }
                            .right{
                            float:right;
                            padding-top:10px;
                            padding-left:70px;
                            padding-right:200px;
                            padding-bottom:10px;
                            }

                            .rotated {
                            writing-mode: tb-rl;
                            transform: rotate(-90deg);
                             -webkit-transform: rotate(-90deg);
                             -moz-transform: rotate(-90deg);
                             -o-transform: rotate(-90deg);
                             -ms-transform: rotate(-90deg);


                            }
                            .dont_split{
                               page-break-inside: avoid;
                                }



</style>

        <div class="header" style="width:100%">
            <div style="width: 15%;float: left;">
                <img src='/web/binary/company_logo' style="width:100%"/>
            </div>
            <div style="width: 69%;float: left; padding-left:10px">
                <h4 style="text-transform: uppercase;  text-align: center;" t-if="res_company.name"><span t-field="res_company.name"/></h4>
                <h5 style=" text-align: center;"><t t-if="res_company.street"><span t-field="res_company.street"/></t><t t-if="res_company.street2"><span t-field="res_company.street2"/> </t><t t-if="res_company.country_id"><span t-field="res_company.country_id"/></t></h5>
            </div>
            <div style="width: 15%;float: left;">


                <table >
                     <style>
                            table, th, td {
                                     border: 1px solid black;
                                    padding-bottom:3px;
                                    padding-left:3px;
                                    padding-top:3px;
                                    padding-right:3px;
                                    align:center;
                                    text-align: center;
                                    }
                        </style>
                    <tr ><td>Letter <br></br> Grade </td><td>Grade <br></br>interval </td><td>Grade <br></br>point</td></tr>

                        <t t-foreach="get_gradings(o)" t-as="g">
                            <tr><td> <span t-field="g.result"/></td>
                                <td> <span t-field="g.min_per"/>-<span t-field="g.max_per"/>%</td>
                                <td> <span t-field="g.score"/></td>
                            </tr>
                        </t>

                </table>
            </div>
 <!--<div class="row" text-align="center" width="100%">-->
                                        <!--<div  style="position: absolute;-->
                                            <!--left: 0;-->
                                            <!--top: 90px;-->
                                            <!--width: 100%;-->
                                            <!--text-align: center;-->
                                            <!--font-size: 18px;">-->
                                                <!--<h3>Academic Transcript</h3>-->
                                            <!--<h5>-->
                                                <!--<t t-set="exams" t-value="get_exams(docs)"/>-->
                                                <!--<t t-foreach="exams" t-as="exam">-->
                                                    <!--<t t-if="exam_last">-->
                                                        <!--<t t-if="len(exams)>1">-->
                                                        <!--<span> &amp; </span>-->
                                                        <!--</t>-->
                                                        <!--<t t-esc="exam.name "/>-->
                                                        <!--<span> Exam - </span>-->
                                                        <!--<t t-esc="exam.academic_year.name"/>-->
                                                    <!--</t>-->
                                                    <!--<t t-else="">-->
                                                        <!--<t t-if="exam_first"></t>-->
                                                        <!--<t t-else="">, </t>-->
                                                        <!--<t t-esc="exam.name"/>-->


                                                    <!--</t>-->
                                                <!--</t>-->
                                            <!--</h5>-->
                                            <!--<h3>Class - -->
                                                <!--<t t-foreach="exams" t-as="exam">-->
                                                    <!--<t t-if="exam_first">-->
                                                        <!--<t t-esc="exam.class_id.code"/>-->
                                                    <!--</t>-->
                                                <!--</t>-->
                                            <!--</h3>-->
                                        <!--</div>-->
                                    <!--</div>-->

        </div>

        <div class="article">
          <t t-raw="0" />
        </div>
           <div class="footer">

            </div>
    </template>
        <template id="marksheet_student_performance_table">
            <table>
                                            <tr><td colspan="2">Informations</td><td colspan="2">Co-curricular activities </td></tr>
                                            <tr><td style="text-align:left;"> Number of students</td>
                                                <td  ><t t-esc="section_total_student" /> </td>
                                                <td style="text-align:left;"> Behaviour</td><td >
                                                    <t t-foreach="exams" t-as="exam">
                                                        <t t-esc="results[student][exam]['result'].behavior.name"/>
                                                    </t>
                                                </td></tr>
                                            <tr><td style="text-align:left;"> Working days</td>
                                                <td>
                                                    <t t-esc="working_days"/>
                                                </td>
                                                <td style="text-align:left;"> Sports program</td>
                                                <td>
                                                    <t t-foreach="exams" t-as="exam">
                                                        <t t-esc="results[student][exam]['result'].sports.name"/>
                                                    </t>
                                                </td></tr>
                                            <tr><td style="text-align:left;"> Attendance</td>
                                                <td>
                                                    <t t-set="attendances" t-value="0"/>
                                                    <t t-foreach="exams" t-as="exam">
                                                        <t t-set="attendances" t-value="attendances+results[student][exam]['result'].attendance"/>
                                                    </t>
                                                    <t t-esc="attendances"/>
                                                </td>
                                                <td style="text-align:left;"> Uniform</td>
                                                <td>
                                                    <t t-foreach="exams" t-as="exam">
                                                        <t t-esc="results[student][exam]['result'].uniform.name"/>
                                                    </t>
                                                </td></tr>
                                            <tr><td style="text-align:left;"> Percentage of attendance</td>
                                                <td>
                                                    <t t-if="working_days>0">
                                                        <t t-esc="round((attendances/working_days)*100)"/>%
                                                    </t>
                                                </td>
                                                <td style="text-align:left;"> Cultural activities</td>
                                                <td>
                                                    <t t-foreach="exams" t-as="exam">
                                                        <t t-esc="results[student][exam]['result'].cultural.name"/>
                                                    </t>
                                                </td>
                                            </tr>
                                        </table>
        </template>
        <template id="marksheet_student_information_table">
           <table>
                                            <tr><td style="border-right:0px solid transparent; text-align:right;"> ID -</td><td style="border-left:0px solid transparent; text-align:left;" width="50px"><span t-field="student.student_id.student_id"/></td>
                                                <td colspan="2" style="width:100px;"> Roll -<span t-field="student.student_id.roll_no"/></td>
                                                <td colspan="2" style="width:100px;">Section -<span t-field="student.student_id.class_id.section_id"/></td>
                                                <td colspan="2" style="width:100px;">Category -<t t-if="student.student_id.student_category=='I'">I</t>
                                                                        <t t-else="">E</t> </td>
                                            </tr>
                                            <tr>
                                                <td style="border-right:0px solid transparent; "><div style=" text-align:right;font-size: 90%;">Name :</div></td><td colspan="7" style="border-left:0px solid transparent; text-align:center;"><span t-field="student.student_id.name"/></td>

                                            </tr>
                                             <tr>
                                                <td colspan="3" style="text-align:left;">Father's Name </td><td colspan="5"><span t-field="student.student_id.father_name.name"/></td>

                                            </tr>
                                            <tr>
                                                <td colspan="3" style="text-align:left;">Mother's Name </td><td colspan="5"><span t-field="student.student_id.mother_name.name"/></td>

                                            </tr>
                                        </table>
        </template>
        <template id="marksheet_body">
            <style>
                            table, th, td{
                                     border: 1px solid black;
                                    vertical-align: middle;
                                    align:center;
                                    font-size:16px;
                                    padding-top:2px;
                                    padding-right:2px;
                                    padding-left:2px;
                                    padding-bottom:2px;
                                    text-align: center;
                                    }
                            .right_top{
                            float:right;
                            padding-top:80px;
                            }
                            .left_top{
                            float:left;
                            padding-top:80px;
                            }
                            .right{
                            float:right;
                            padding-top:10px;
                            padding-left:80px;
                            padding-right:10px;
                            padding-bottom:10px;
                            }
                            .rotated {
                            padding-top:2px;
                            padding-bottom:2px;
                            writing-mode: tb-rl;
                            transform: rotate(-90deg);
                              -webkit-transform: rotate(-90deg);
                              -moz-transform: rotate(-90deg);
                              -o-transform: rotate(-90deg);
                              -ms-transform: rotate(-90deg);
                            }
                            .dont_split{
                               page-break-inside: avoid;
                                }
                        </style>
            <div class="page" >
                                <div class="oe_structure">
                                    <div class="row" width="100%">
                                        <div class="right_top">
                                            <t t-call="education_exam.marksheet_student_performance_table"/>
                                        </div>
                                        <div class="left_top">
                                            <t t-call="education_exam.marksheet_student_information_table"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
        </template>

        <template id="report_exam_marksheet">
            <t t-call="web.html_container">
                <t t-call="education_exam.external_layout_mark_sheet">
                    <t t-set="exams" t-value="get_exams(docs)"/>
                    <t t-set="working_days" t-value="get_total_working_days(exams)"/>
                    <t t-set="all_students" t-value="get_students(docs)"/>
                    <t t-set="sections" t-value="get_sections(docs)"/>
                    <t t-if="len(sections)==0">
                        <t t-set="students" t-value="all_students"/>
                        <t t-set="results" t-value="get_results(docs,all_students,exams)"/>
                        <t t-foreach="students" t-as="student">
                            <t t-set="section_total_student" t-value="len(get_students_in_student_section(student))"/>
                            <t t-call="education_exam.marksheet_body"/>
                        </t>
                    </t>
                    <t t-else="">
                        <t t-foreach="sections" t-as="section">
                            <t t-set="students" t-value="get_students_in_section(section)"/>
                            <t t-set="section_total_student" t-value="len(get_students_in_section(section))"/>
                            <t t-set="results" t-value="get_results(docs,all_students,exams)"/>
                            <t t-foreach="students" t-as="student">
                                <t t-call="education_exam.marksheet_body"/>
                            </t>
                        </t>
                    </t>
                    <!--<t t-foreach="sections"  t-as="section">-->


                </t>
            </t>
        </template>



    </data>
</odoo>